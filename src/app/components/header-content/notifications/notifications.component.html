<div class="header-notification-container">
  <button
    mat-icon-button
    (click)="isOpen = !isOpen"
    [ngClass]="[cssPrefix + '-btn']"
    [class.open]="isOpen"
  >
    <mat-icon>notifications_none</mat-icon>
    <span class="badge" *ngIf="notifications && notifications?.length !== 0">{{
      notifications?.length
    }}</span>
  </button>
  <div class="dropdown mat-elevation-z4" [class.open]="isOpen">
    <div class="card">
      <div class="header" fxLayout="row" fxLayoutAlign="space-between center">
        <div class="title">
          <div class="name">Notifications</div>
          <div class="extra" *ngIf="notifications?.length > 0">
            Yout have {{ notifications?.length }} new notifications.
          </div>
        </div>
      </div>
      <div
        *ngIf="notifications?.length !== 0; then thenBlock; else elseBlock"
      ></div>
    </div>
  </div>
</div>

<ng-template #thenBlock>
  <perfect-scrollbar class="content">
    <div *ngFor="let notification of notifications; last as isLast">
      <div
        class="notification"
        fxLayout="row"
        fxLayoutAlign="start center"
        mat-ripple
      >
        <a
          mat-icon-button
          color="primary"
          [routerLink]="['/show-task', notification.taskId]"
          (click)="updateNotification(notification.id)"
        >
          <mat-icon class="icon">notifications</mat-icon>
        </a>
        <div class="title" fxLayout="column">
          <div class="name">{{ notification.title }}</div>
          <div class="time">{{ notification.startDate }}</div>
        </div>
        <span fxFlex></span>
      </div>
      <div class="divider" *ngIf="!isLast"></div>
    </div>
  </perfect-scrollbar>
</ng-template>

<ng-template #elseBlock>
  <div class="no" fxLayout="row" fxLayoutAlign="center center">lala</div>
</ng-template>
